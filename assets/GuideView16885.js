import{o as F,E as D,B as C,G as T,f as G,a as z,y as g,g as B,L as R,_ as V,r as _,M as N,h as r,i as d,j as l,w as c,k as h,l as U,t as M,Q as j}from"../index16885.js";const A={setup(){F(()=>{u.value=!0,a.value={first:0,rows:b.value.rows,sortField:null,sortOrder:null,filters:n.value},D.register("myfilter",(t,v)=>t===v),m()});const f=C(),s=T(),p=G(()=>f.status),o=G(()=>f.responseGuides),S=z(),b=g(),y=g(),n=g({global:{value:null,matchMode:"like"}}),u=g(!0),a=g(),x=g(0),k=g([{label:"My Filter",value:"myfilter"}]);function m(){var v;u.value=!0;let t=new Map;(v=n.value.global)!=null&&v.value&&t.set("full_name_like",n.value.global.value),t.delete("global"),t.set("page",a.value.page+1),t.set("per_page",a.value.rows),a.value.sortField&&(a.value.sortOrder==1?t.set("sorted_by",a.value.sortField+"_asc"):t.set("sorted_by",a.value.sortField+"_desc")),setTimeout(()=>{e(t)},Math.random()*1e3+250)}const e=async function(t){await f.fetchAllGuides(t).then(()=>{u.value=!1}).catch(v=>{u.value=!1,B(S,v)})};return{dt:b,responseGuides:o,filters:n,loading:u,totalRecords:x,lazyParams:a,matchModes:k,currentGuide:y,status:p,onPage:t=>{a.value=t,m()},onSort:t=>{a.value=t,m()},onFilter:()=>{a.value.page=0,a.value.filters=n.value,m()},showSidebar:function(t){s.setDetailType("guide",!1,"Dettaglio guida",t.id),s.updateSidebar(!0)},loadLazyData:m,changeStatus:async function(t){},getRowClass:function(t){return t!=null&&t.cluster?t.cluster:""},formatDataFromUnixTimestamps:R}},components:{}};const E={class:"user-table"},P={class:"flex justify-content-between align-items-center"},L={class:"p-input-icon-left w-full mr-3 py-2"},I=h("i",{class:"pi pi-search"},null,-1),O={key:0},K={key:1},Q={key:0},$={key:1},q={key:0},H={key:1},J={class:"flex justify-content-center"},W={class:"flex justify-content-center"};function X(f,s,p,o,S,b){const y=_("InputText"),n=_("Column"),u=_("Avatar"),a=_("Editor"),x=_("Button"),k=_("DataTable"),m=N("tooltip");return r(),d("div",E,[l(k,{value:o.responseGuides.guides,totalRecords:o.responseGuides.total,lazy:!0,paginator:!1,rows:30,filters:o.filters,"onUpdate:filters":s[1]||(s[1]=e=>o.filters=e),ref:"dt",dataKey:"id",loading:o.loading,onPage:s[2]||(s[2]=e=>o.onPage(e)),onSort:s[3]||(s[3]=e=>o.onSort(e)),removableSort:"",stripedRows:"",rowClass:o.getRowClass},{header:c(()=>[h("div",P,[h("span",L,[I,l(y,{modelValue:o.filters.global.value,"onUpdate:modelValue":s[0]||(s[0]=e=>o.filters.global.value=e),placeholder:"Ricerca per nome",class:"border-none w-full",onChange:o.loadLazyData},null,8,["modelValue","onChange"])])])]),empty:c(()=>[U(" Nessuna guida trovata. ")]),default:c(()=>[l(n,{field:"full_name",header:"Nome Cognome",filterMatchMode:"contains",ref:"full_name"},null,512),l(n,{header:"Foto",filterMatchMode:"contains",ref:"location",field:"location"},{body:c(({data:e})=>{var i;return[e.image_url?(r(),d("div",O,[l(u,{image:(i=e.image_url)==null?void 0:i.url,class:"mr-2",size:"xlarge",shape:"circle"},null,8,["image"])])):(r(),d("div",K,"-"))]}),_:1},512),l(n,{header:"Descrizione breve (IT)",filterMatchMode:"contains",ref:"location",field:"location",style:{width:"30rem"}},{body:c(({data:e})=>{var i;return[e.translations&&((i=e.translations.it.short_description)!=null&&i.text)?(r(),d("div",Q,[l(a,{modelValue:e.translations.it.short_description.text,"onUpdate:modelValue":w=>e.translations.it.short_description.text=w,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])])):(r(),d("span",$,"-"))]}),_:1},512),l(n,{header:"Descrizione breve (EN)",filterMatchMode:"contains",ref:"location",field:"location",style:{width:"30rem"}},{body:c(({data:e})=>{var i;return[e.translations&&((i=e.translations.en.short_description)!=null&&i.text)?(r(),d("div",q,[l(a,{modelValue:e.translations.en.short_description.text,"onUpdate:modelValue":w=>e.translations.en.short_description.text=w,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])])):(r(),d("span",H,"-"))]}),_:1},512),l(n,{header:"Lingue parlate",filterMatchMode:"contains",ref:"known_languages",field:"known_languages"},{body:c(({data:e})=>[h("div",J,M(e.known_languages||"-"),1)]),_:1},512),l(n,{header:"Anni di esperienza",filterMatchMode:"contains",ref:"years",field:"years",headerClass:"flex justify-content-center"},{body:c(({data:e})=>[h("div",W,M(e.years||"-"),1)]),_:1},512),l(n,{header:"",style:{width:"4rem"}},{body:c(({data:e})=>[j(l(x,{type:"button",onClick:i=>o.showSidebar(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-3",icon:"pi pi-arrow-right",text:"",rounded:""},null,8,["onClick"]),[[m,"Modifica",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading","rowClass"])])}const Y=V(A,[["render",X]]),Z={setup(){const f=C(),s=G(()=>f.getTotalGuides),p=T();return{totalGuides:s,showSidebar:function(){p.setDetailType("guide",!0,"Nuova guida",null),p.updateSidebar(!0),p.setShowDetail(!0)}}},components:{GuidesTable:Y}},ee={class:"flex justify-content-between align-items-center"},te={class:""},oe={key:0},se={key:1};function ne(f,s,p,o,S,b){const y=_("Button"),n=_("GuidesTable");return r(),d("div",null,[h("div",ee,[h("h1",te,[o.totalGuides==1?(r(),d("span",oe," 1 Guida")):(r(),d("span",se,M(o.totalGuides)+" Guide",1))]),l(y,{label:"Aggiungi guida",onClick:s[0]||(s[0]=u=>o.showSidebar()),class:"mb-3",rounded:"",outlined:""})]),l(n)])}const ce=V(Z,[["render",ne]]);export{ce as default};
