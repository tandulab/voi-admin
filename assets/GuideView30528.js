import{o as V,E as F,B as M,G as C,f as x,a as B,y as m,g as D,L as z,_ as T,r as g,M as N,h as r,i as d,j as a,w as _,l as R,k as b,t as G,S as A}from"../index30528.js";const U={setup(){V(()=>{u.value=!0,n.value={first:0,rows:h.value.rows,sortField:null,sortOrder:null,filters:c.value},F.register("myfilter",(t,v)=>t===v),e()});const f=M(),s=C(),p=x(()=>f.status),o=x(()=>f.responseGuides),w=B(),h=m(),l=m(),c=m({global:{value:null,matchMode:"like"}}),u=m(!0),n=m(),S=m(0),k=m([{label:"My Filter",value:"myfilter"}]);function e(){var v;u.value=!0;let t=new Map;(v=c.value.global)!=null&&v.value&&t.set("full_name_like",c.value.global.value),t.delete("global"),t.set("page",n.value.page+1),t.set("per_page",n.value.rows),n.value.sortField&&(n.value.sortOrder==1?t.set("sorted_by",n.value.sortField+"_asc"):t.set("sorted_by",n.value.sortField+"_desc")),setTimeout(()=>{i(t)},Math.random()*1e3+250)}const i=async function(t){await f.fetchAllGuides(t).then(()=>{u.value=!1}).catch(v=>{u.value=!1,D(w,v)})};return{dt:h,responseGuides:o,filters:c,loading:u,totalRecords:S,lazyParams:n,matchModes:k,currentGuide:l,status:p,onPage:t=>{n.value=t,e()},onSort:t=>{n.value=t,e()},onFilter:()=>{n.value.page=0,n.value.filters=c.value,e()},showSidebar:function(t){s.setDetailType("guide",!1,"Dettaglio guida",t.id,!0,!0),s.updateSidebar(!0)},loadLazyData:e,changeStatus:async function(t){},getRowClass:function(t){return t!=null&&t.cluster?t.cluster:""},formatDataFromUnixTimestamps:z}},components:{}};const j={class:"user-table"},E={key:0},P={key:1},$={key:0},L={key:1},O={key:0},I={key:1},K={class:"flex justify-content-center"},q={class:"flex justify-content-center"};function H(f,s,p,o,w,h){const l=g("Column"),c=g("Avatar"),u=g("Editor"),n=g("Button"),S=g("DataTable"),k=N("tooltip");return r(),d("div",j,[a(S,{value:o.responseGuides.guides,totalRecords:o.responseGuides.total,lazy:!0,paginator:!1,rows:30,filters:o.filters,"onUpdate:filters":s[0]||(s[0]=e=>o.filters=e),ref:"dt",dataKey:"id",loading:o.loading,onPage:s[1]||(s[1]=e=>o.onPage(e)),onSort:s[2]||(s[2]=e=>o.onSort(e)),removableSort:"",stripedRows:"",rowClass:o.getRowClass},{empty:_(()=>[R(" Nessuna guida trovata. ")]),default:_(()=>[a(l,{field:"full_name",header:"Nome Cognome",filterMatchMode:"contains",ref:"full_name"},null,512),a(l,{header:"Foto",filterMatchMode:"contains",ref:"location",field:"location"},{body:_(({data:e})=>{var i;return[e.image_url?(r(),d("div",E,[a(c,{image:(i=e.image_url)==null?void 0:i.url,class:"mr-2",size:"xlarge",shape:"circle"},null,8,["image"])])):(r(),d("div",P,"-"))]}),_:1},512),a(l,{header:"Descrizione breve (IT)",filterMatchMode:"contains",ref:"location",field:"location",style:{width:"30rem"}},{body:_(({data:e})=>{var i;return[e.translations&&((i=e.translations.it.short_description)!=null&&i.text)?(r(),d("div",$,[a(u,{modelValue:e.translations.it.short_description.text,"onUpdate:modelValue":y=>e.translations.it.short_description.text=y,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])])):(r(),d("span",L,"-"))]}),_:1},512),a(l,{header:"Descrizione breve (EN)",filterMatchMode:"contains",ref:"location",field:"location",style:{width:"30rem"}},{body:_(({data:e})=>{var i;return[e.translations&&((i=e.translations.en.short_description)!=null&&i.text)?(r(),d("div",O,[a(u,{modelValue:e.translations.en.short_description.text,"onUpdate:modelValue":y=>e.translations.en.short_description.text=y,readonly:!0},null,8,["modelValue","onUpdate:modelValue"])])):(r(),d("span",I,"-"))]}),_:1},512),a(l,{header:"Lingue parlate",filterMatchMode:"contains",ref:"known_languages",field:"known_languages"},{body:_(({data:e})=>[b("div",K,G(e.known_languages||"-"),1)]),_:1},512),a(l,{header:"Anni di esperienza",filterMatchMode:"contains",ref:"years",field:"years",headerClass:"flex justify-content-center"},{body:_(({data:e})=>[b("div",q,G(e.years||"-"),1)]),_:1},512),a(l,{header:"",style:{width:"4rem"}},{body:_(({data:e})=>[A(a(n,{type:"button",onClick:i=>o.showSidebar(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-3",icon:"pi pi-arrow-right",text:"",rounded:""},null,8,["onClick"]),[[k,"Modifica",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading","rowClass"])])}const J=T(U,[["render",H]]),Q={setup(){const f=M(),s=x(()=>f.getTotalGuides),p=C();return{totalGuides:s,showSidebar:function(){p.setDetailType("guide",!0,"Nuova guida",null),p.updateSidebar(!0),p.setShowDetail(!0)}}},components:{GuidesTable:J}},W={class:"flex justify-content-between align-items-center"},X={class:""},Y={key:0},Z={key:1};function ee(f,s,p,o,w,h){const l=g("Button"),c=g("GuidesTable");return r(),d("div",null,[b("div",W,[b("h1",X,[o.totalGuides==1?(r(),d("span",Y," 1 Guida")):(r(),d("span",Z,G(o.totalGuides)+" Guide",1))]),a(l,{label:"Aggiungi guida",onClick:s[0]||(s[0]=u=>o.showSidebar()),class:"mb-3",rounded:"",outlined:""})]),a(c)])}const ie=T(Q,[["render",ee]]);export{ie as default};
